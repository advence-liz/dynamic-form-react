(this["webpackJsonpdynamic-form-react"]=this["webpackJsonpdynamic-form-react"]||[]).push([[0],{201:function(e,t,a){e.exports=a(381)},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},270:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),c=a.n(r),i=(a(206),a(207),a(76)),o=a(13),u=a(24),d=a(389),s=a(39),m=a(392),p=a(388),f=a(194),b=a(44);function E(e,t){var a=JSON.parse(JSON.stringify(e));return v(a,t),a}function v(e,t){t(e,null,null),function e(a){if(a.lanes){var n,l=Object(b.a)(a.lanes);try{for(l.s();!(n=l.n()).done;)for(var r=n.value,c=0;c<r.cellDataList.length;c++){var i=r.cellDataList[c];t(i,c,r.cellDataList),"grid"!==i.type&&"list"!==i.type||e(i)}}catch(o){l.e(o)}finally{l.f()}}}(e)}function g(e,t){var a=null;return function e(n){if(n.lanes){var l,r=Object(b.a)(n.lanes);try{for(r.s();!(l=r.n()).done;)for(var c=l.value,i=0;i<c.cellDataList.length;i++){var o=c.cellDataList[i];if(t(o,i,c.cellDataList)){var u;a=[{parentId:n.id,laneIndex:null===(u=n.lanes)||void 0===u?void 0:u.indexOf(c),index:i},c.cellDataList,o];break}"grid"!==o.type&&"list"!==o.type||e(o)}}catch(d){r.e(d)}finally{r.f()}}return a}(e)}function y(e,t,a){var n=null;return function e(l){if(l.id===t)return l.lanes[a].cellDataList;if(l.lanes){var r,c=Object(b.a)(l.lanes);try{for(c.s();!(r=c.n()).done;){var i,o=r.value,u=Object(b.a)(o.cellDataList);try{for(u.s();!(i=u.n()).done;){var d=i.value;"grid"!==d.type&&"list"!==d.type||(d.id===t?n=d.lanes[a].cellDataList:e(d))}}catch(s){u.e(s)}finally{u.f()}}}catch(s){c.e(s)}finally{c.f()}}return n}(e)}function h(e,t,a,n){var l=g(e,(function(e){return e.id===a})),r=Object(o.a)(l,2),c=r[0],i=r[1];"up"===n?i.splice(c.index,0,t):i.splice(c.index+1,0,t),j(e,t.id)}function O(e,t){if(!t.type)return e;if("INIT"===t.type)return t.data;var a=JSON.parse(JSON.stringify(e));if("POSITIONED_MOVE"===t.type){var n=g(a,(function(e){return e.id===t.id})),l=Object(o.a)(n,3),r=l[0],c=l[1],i=l[2];c.splice(r.index,1),h(a,i,t.dropItemId,t.position)}else if("POSITIONED_ADD"===t.type)h(a,t.dragItem,t.dropItemId,t.position);else if("ADD"===t.type){y(a,t.location.parentId,t.location.index).push(t.dragItem),j(a,t.dragItem.id)}else if("UPDATE"===t.type){var u=g(a,(function(e){return e.id===t.data.id})),d=Object(o.a)(u,2),s=d[0];d[1].splice(s.index,1,t.data)}else if("MOVE"===t.type){var m=g(a,(function(e){return e.id===t.id})),p=Object(o.a)(m,3),f=p[0],v=p[1],O=p[2];v.splice(f.index,1);var D=y(a,t.location.parentId,t.location.index);null===D||void 0===D||D.push(O),j(a,O.id)}else if("ACTIVE"===t.type)j(a,t.id);else if("DELETE_ACTIVE"===t.type)!function(e){var t=g(e,(function(e){return void 0!==e.active&&e.active}));if(t){var a=Object(o.a)(t,2),n=a[0];a[1].splice(n.index,1)}}(a);else if("SET_VALUE"===t.type)!function(e,t,a){(function e(n){if(n.lanes){var l,r=Object(b.a)(n.lanes);try{for(r.s();!(l=r.n()).done;){var c,i=l.value,o=Object(b.a)(i.cellDataList);try{for(o.s();!(c=o.n()).done;){var u=c.value;switch(u.type){case"grid":e(u);break;case"list":var d,s=Object(b.a)(u.lanes);try{for(s.s();!(d=s.n()).done;)for(var m=d.value,p=0;p<m.cellDataList.length;p++){var f=m.cellDataList[p];if(f.id===t.id)return f.value=a,!0}}catch(E){s.e(E)}finally{s.f()}break;default:if(u.id===t.id)return u.value=a,!0}}}catch(E){o.e(E)}finally{o.f()}}}catch(E){r.e(E)}finally{r.f()}}return!1})(e)}(a,t.target,t.value);else if("VALIDATE"===t.type)return E(e,(function(e){e.required&&!e.value?(e.warning="".concat(e.label," is required."),e.warnable=!0):(e.warnable=!1,e.warning="")}));return a}function j(e,t){v(e,(function(e){e.active=t===e.id}))}function D(e){var t={type:e,id:e+(new Date).getTime(),active:!1};return"grid"===t.type?t.lanes=[{span:12,cellDataList:[]},{span:12,cellDataList:[]}]:"input"===t.type?(t.label="\u5355\u884c\u6587\u672c",t.placeholder="\u8bf7\u586b\u5199",t.required=!1):"select"===t.type?(t.label="\u4e0b\u62c9\u9009\u62e9",t.placeholder="\u8bf7\u9009\u62e9",t.options=[],t.required=!1):"list"===t.type?(t.label="\u5217\u8868",t.lanes=[{cellDataList:[],span:100}]):"datetime"===t.type?(t.label="\u65e5\u671f\u65f6\u95f4",t.placeholder="\u8bf7\u9009\u62e9",t.required=!1):"checkbox"===t.type?(t.label="\u591a\u9009",t.options=[],t.required=!1):"radio"===t.type&&(t.label="\u5355\u9009",t.options=[],t.required=!1),t}var C=a(29),w=[{name:"\u57fa\u7840\u5b57\u6bb5",widgets:[{type:"input",icon:l.a.createElement(C.d,null),name:"\u5355\u884c\u6587\u672c"},{type:"select",icon:l.a.createElement(C.c,null),name:"\u4e0b\u62c9\u9009\u62e9"},{type:"datetime",icon:l.a.createElement(C.a,null),name:"\u65e5\u671f\u65f6\u95f4"},{type:"checkbox",icon:l.a.createElement(C.b,null),name:"\u591a\u9009"},{type:"label",icon:l.a.createElement(C.e,null),name:"\u6587\u672c"}]},{name:"\u9ad8\u7ea7\u5b57\u6bb5",widgets:[{type:"grid",icon:l.a.createElement(C.i,null),name:"\u5e03\u5c40"},{type:"list",icon:l.a.createElement(C.h,null),name:"\u5217\u8868"}]}],x=a(8),k=a(397),I=a(398),T=a(394),A=(a(208),l.a.createContext(null)),F=Object(n.forwardRef)((function(e,t){var a=e.data,r=e.customCells,c=Object(n.useReducer)(O,a),i=Object(o.a)(c,2),u=i[0],d=i[1];return Object(n.useImperativeHandle)(t,(function(){return{getData:function(){return function(e){var t={};return function e(t,a){t.lanes&&t.lanes.forEach((function(t){t.cellDataList.forEach((function(t){switch(t.type){case"grid":e(t,a);break;case"list":a[t.id]=[],t.lanes.forEach((function(e,n){var l={};e.cellDataList.forEach((function(e){l[e.id]=e.value})),a[t.id].push(l)}));break;default:a[t.id]=t.value}}))}))}(e,t),t}(u)},validate:function(){d({type:"VALIDATE"})}}})),l.a.createElement(A.Provider,{value:d},l.a.createElement(Z,{ref:t,cellData:u,className:"preview",customCells:r}))})),P=Object(n.forwardRef)((function(e,t){var a=e.layout,r=void 0===a?"horizontal":a,c=e.required,i=void 0!==c&&c,o=e.warning,u=void 0===o?null:o,d=e.warnable,s=void 0===d||d,m=e.label,p=void 0===m?l.a.createElement(l.a.Fragment,null):m,f=e.element,b=Object(n.useContext)(A);return l.a.createElement("table",{ref:t,className:["form-group",r].join(" ")},l.a.createElement("tbody",null,"horizontal"===r?l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{className:"label"},i?l.a.createElement("span",{className:"required"},"*"):l.a.createElement(l.a.Fragment,null),p),l.a.createElement("td",{className:"element"},f)),s?l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",{className:"warning"},u?l.a.createElement("span",null,u):l.a.createElement("span",null,"\xa0"))):l.a.createElement(l.a.Fragment,null)):l.a.createElement(l.a.Fragment,null,!b&&l.a.createElement("tr",null,l.a.createElement("td",{className:"label"},i?l.a.createElement("span",{className:"required"},"*"):l.a.createElement(l.a.Fragment,null),p)),l.a.createElement("tr",null,l.a.createElement("td",{className:"element"},f)),s?l.a.createElement("tr",null,l.a.createElement("td",{className:"warning"},u?l.a.createElement("span",null,u):l.a.createElement("span",null,"\xa0"))):l.a.createElement(l.a.Fragment,null))))})),L=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.dispatch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P,{ref:t,required:a.required,warning:a.warning,layout:n,warnable:a.warnable,label:a.labeled?l.a.createElement("label",{title:a.label},a.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(T.a,{disabled:a.disabled,value:a.value,placeholder:a.placeholder,onChange:function(e){r&&r({type:"SET_VALUE",target:a,value:e.target.value})}})}))})),U=a(384),q=a(385),N=a(25),R=a(7),$=a.n(R),S=Object(n.forwardRef)((function(e,t){var a=e.cellDataList,r=e.direction,c=e.className,i=e.span,o=e.customCells,u=Object(n.useContext)(A),d=a.map((function(e,t){return null===u?l.a.createElement(ee,{key:e.id,layout:r,cellData:e,index:t,customCells:o}):l.a.createElement(Z,{cellData:e,key:e.id,layout:r,customCells:o})}));return l.a.createElement(U.a,{span:i,className:"lane "+r+(c||"")},l.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t},d))})),V=function(e){var t=e.cellDataList,a=e.direction,r=e.location,c=e.span,u=e.customCells,d=Object(n.useContext)(_e),s=Object(k.a)({accept:["input","grid","select","datetime","checkbox","list","instance","label"].concat(Object(i.a)((u||[]).map((function(e){return e.type})))),drop:function(e,t){if(p){if(!t.getClientOffset())return;"instance"===e.type?d({type:"MOVE",id:e.id,location:r}):d({type:"ADD",dragItem:D(e.type),location:r})}},collect:function(e){var t=e.isOver({shallow:!0});return t&&e.getItem().id===r.parentId&&(t=!1),{isOver:t}}}),m=Object(o.a)(s,2),p=m[0].isOver,f=m[1];return l.a.createElement(S,{span:c,cellDataList:t,className:p?" hovered":"",ref:f,direction:a,customCells:u})};a(270);function z(){var e=Object(u.a)(["\n  padding: 0 10px;\n  white-space: nowrap;\n  width: 100%;\n  overflow-x: auto;\n\n  > div {\n    width: 200px;\n    display: inline-block;\n  }\n"]);return z=function(){return e},e}var _=Object(N.a)(U.a)(z()),J=Object(n.forwardRef)((function(e,t){var a=e.direction,r=void 0===a?"horizontal":a,c=e.cellData,i=e.customCells,o=Object(n.useContext)(A),u=null===o;function d(e,t){return u?l.a.createElement(V,{key:c.id+"-"+t,direction:r,cellDataList:e.cellDataList,location:{parentId:c.id,index:t},span:e.span,customCells:i}):l.a.createElement(S,{key:c.id+"-"+t,cellDataList:e.cellDataList,direction:r,span:e.span,customCells:i})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{ref:t,className:"lanes"},"horizontal"===r?l.a.createElement(l.a.Fragment,null,c.lanes.map((function(e,t){return d(e,t)}))):l.a.createElement(l.a.Fragment,null,!u&&l.a.createElement(_,{span:12},c.lanes[0].cellDataList.map((function(e){return l.a.createElement("div",null,l.a.createElement("span",null,e.label))}))),c.lanes.map((function(e){return d(e,0)})))),!u&&"vertical"===r&&l.a.createElement(s.a,{onClick:function(){o({type:"UPDATE",data:$()(c,{lanes:{$push:[$()(c.lanes[0],{cellDataList:{$apply:function(e){return e.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{id:e.id+ +new Date})}))}}})]}})})},type:"link"},"Add"))})),B=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.direction,r=e.customCells;return l.a.createElement(l.a.Fragment,null,l.a.createElement(J,{ref:t,cellData:a,direction:n,customCells:r}))})),M=a(115),H=M.a.Option,W=Object(n.forwardRef)((function(e,t){var a,n=e.data,r=e.layout,c=e.dispatch;return n.options&&0!==n.options.length||(n.options=[{label:"Joyce",value:"1"},{label:"Teresa",value:"2"}]),l.a.createElement(l.a.Fragment,null,l.a.createElement(P,{ref:t,required:n.required,warning:n.warning,layout:r,warnable:n.warnable,label:n.labeled?l.a.createElement("label",{title:n.label},n.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(M.a,{placeholder:n.placeholder,disabled:n.disabled,style:{width:"100%"},onChange:function(e){c&&c({type:"SET_VALUE",target:n,value:e})}},null===(a=n.options)||void 0===a?void 0:a.map((function(e){return l.a.createElement(H,{key:e.value,value:e.value},e.label)})))}))})),G=a(390),K=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.dispatch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P,{ref:t,required:a.required,warning:a.warning,layout:n,warnable:a.warnable,label:a.labeled?l.a.createElement("label",{title:a.label},a.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(G.a,{style:{width:"100%"},disabled:a.disabled,value:a.value,placeholder:a.placeholder,onChange:function(e){r&&r({type:"SET_VALUE",target:a,value:e})}})}))})),Q=a(395),X=function(e){var t=e.data;e.layout,e.dispatch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P,{required:t.required,warnable:t.warnable,label:l.a.createElement("label",null,t.label),element:l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a.Group,{options:t.options,onChange:function(e){console.log(e)}}))}))},Y=Object(n.forwardRef)((function(e,t){var a=e.data;return l.a.createElement("div",{style:{height:42,padding:"0 10px"}},l.a.createElement("label",{style:{lineHeight:"42px"},title:a.label},a.label||" "))})),Z=Object(n.forwardRef)((function(e,t){var a=e.cellData,r=e.layout,c=void 0===r?"horizontal":r,i=e.style,o=e.onClick,u=e.className,d=e.customCells,s=Object(n.useContext)(A),m=Object(x.a)({required:!1,warnable:!1,layout:"default",labeled:!0},a);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:t,style:i,className:"instance ".concat(!s&&m.active?" active ":" ").concat(u||""),onClick:o},"input"===m.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{data:m,dispatch:s,layout:c})):"grid"===m.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(B,{data:m,customCells:d})):"list"===m.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(B,{data:m,direction:"vertical"})):"select"===m.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{data:m,dispatch:s,layout:c})):"datetime"===m.type?l.a.createElement(K,{data:m,dispatch:s,layout:c}):"checkbox"===m.type?l.a.createElement(X,{data:m,dispatch:s,layout:c}):"label"===m.type?l.a.createElement(Y,{data:m,dispatch:s,layout:c}):d&&d.some((function(e){return e.type===m.type}))&&l.a.createElement(d.filter((function(e){return e.type===m.type}))[0].cell,{data:m,dispatch:s,layout:c})||l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"No Data"),l.a.createElement("span",null,JSON.stringify(null===d||void 0===d?void 0:d.length)))))})),ee=function(e){var t=e.cellData,a=e.index,r=e.layout,c=void 0===r?"horizontal":r,u=e.className,d=e.customCells,s=Object(x.a)({required:!1,warnable:!1,layout:"default",labeled:!0},t),m=Object(n.useRef)(null),p=Object(n.useContext)(_e),f=Object(n.useState)(""),b=Object(o.a)(f,2),E=b[0],v=b[1],g=Object(k.a)({accept:["instance","input","select","checkbox","datetime","grid","list","label"].concat(Object(i.a)((d||[]).map((function(e){return e.type})))),hover:function(e,a){if(m.current&&a.isOver({shallow:!0})&&a.getItem().id!==t.id&&a.getClientOffset()){var n=m.current.getBoundingClientRect(),l=a.getClientOffset();if("horizontal"===c){var r=(n.bottom-n.top)/2,i=l.y-n.top;v(i>r?" drop-over-downward":" drop-over-upward")}else{var o=(n.right-n.left)/2,u=l.x-n.left;v(u>o?" drop-over-rightward":" drop-over-leftward")}}else v("")},collect:function(e){return{isOver:e.isOver({shallow:!0})}},drop:function(e,a){if(m.current&&a.isOver({shallow:!0})){var n,l=m.current.getBoundingClientRect(),r=a.getClientOffset();if(r){if("horizontal"===c){var i=(l.bottom-l.top)/2;n=r.y-l.top>i?"down":"up"}else{var o=(l.right-l.left)/2;n=r.x-l.left>o?"down":"up"}"instance"===e.type?p({type:"POSITIONED_MOVE",id:a.getItem().id,position:n,dropItemId:t.id}):p({type:"POSITIONED_ADD",position:n,dropItemId:t.id,dragItem:D(e.type)})}}}}),y=Object(o.a)(g,2),h=y[0].isOver,O=y[1],j=Object(I.a)({item:{type:"instance",id:t.id,index:a},collect:function(e){return{isDragging:!!e.isDragging()}},begin:function(){p({type:"ACTIVE",id:t.id})}}),C=Object(o.a)(j,2),w=C[0].isDragging;return(0,C[1])(O(m)),l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,{customCells:d,className:"".concat(h?E:""," ").concat(u||""),onClick:function(e){e.stopPropagation(),p({type:"ACTIVE",id:t.id}),p({type:"EDIT",id:t.id})},ref:m,style:{opacity:w?"0.5":1},cellData:s,layout:c}))},te=a(49),ae=a(399);function ne(e){var t=e.index,a=e.data,r=e.move,c=e.onRemove,i=e.onResize,u=Object(n.useRef)(null),d=Object(I.a)({item:{type:"config",index:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(o.a)(d,2)[1],p=Object(k.a)({accept:"config",hover:function(e,a){if(u.current){var n=e.index,l=t;if(n!==l){var c=u.current.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=a.getClientOffset().y-c.top;n<l&&o<i||n>l&&o>i||(r(n,l),e.index=l)}}}});return m((0,Object(o.a)(p,2)[1])(u)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:u},l.a.createElement(C.f,{style:{cursor:"move"}}),l.a.createElement(ae.a,{onChange:i,value:a.span,size:"small",style:{width:"160px",margin:"0 4px"}}),l.a.createElement(s.a,{type:"link",onClick:c,style:{padding:"0"}},l.a.createElement(C.g,null))))}var le=a(393);function re(e){var t=e.data,a=Object(n.useContext)(_e);return l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u5217"},l.a.createElement(l.a.Fragment,null,t&&t.lanes&&t.lanes.map((function(e,n){return l.a.createElement(ne,{key:"lane-config-"+n,index:n,data:e,onResize:function(e){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{lanes:$()(t.lanes,Object(te.a)({},n,{span:{$set:e||0}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{lanes:$()(t.lanes,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.lanes)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{lanes:$()(t.lanes,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(s.a,{type:"link",onClick:function(){var e=Object(x.a)({},t);e.lanes.push({cellDataList:[],span:12}),a({type:"UPDATE",data:e})}},"\u6dfb\u52a0\u5217"))))}var ce=a(386);function ie(e){var t=e.data,a=Object(n.useContext)(_e);return l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:$()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(le.a.Item,{label:"\u5fc5\u586b"},l.a.createElement(ce.a,{checked:t.required,onChange:function(e){a({type:"UPDATE",data:$()(t,{required:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u53ea\u8bfb"},l.a.createElement(ce.a,{checked:t.disabled,onChange:function(e){a({type:"UPDATE",data:$()(t,{disabled:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u9ed8\u8ba4\u503c"},l.a.createElement(T.a,{value:t.defaultValue,onChange:function(e){a({type:"UPDATE",data:$()(t,{defaultValue:{$set:e.target.value}})})}}))))}var oe=a(391),ue=a(387),de=oe.a.Text;function se(e){var t=e.data,a=[{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null,"now: "),l.a.createElement(de,{type:"secondary"},"\u5f53\u524d\u65f6\u95f4")),text:"now",value:"now"}],r=Object(n.useState)(a),c=Object(o.a)(r,2),i=c[0],u=c[1],d=Object(n.useContext)(_e);return l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:t.label,onChange:function(e){d({type:"UPDATE",data:$()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(le.a.Item,{label:"\u5fc5\u586b"},l.a.createElement(ce.a,{checked:t.required,onChange:function(e){d({type:"UPDATE",data:$()(t,{required:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u53ea\u8bfb"},l.a.createElement(ce.a,{checked:t.disabled,onChange:function(e){d({type:"UPDATE",data:$()(t,{disabled:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u9ed8\u8ba4\u503c"},l.a.createElement(ue.a,{onSearch:function(e){u(a.filter((function(t){return t.text.search(new RegExp(e,"i"))>-1})))}},i.map((function(e){return l.a.createElement(ue.a.Option,{value:e.value,key:e.value},e.label)}))))))}function me(e){var t=e.index,a=e.data,r=e.move,c=e.onRemove,i=e.onChange,u=Object(n.useRef)(null),d=Object(I.a)({item:{type:"config",index:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(o.a)(d,2)[1],p=Object(k.a)({accept:"config",hover:function(e,a){if(u.current){var n=e.index,l=t;if(n!==l){var c=u.current.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=a.getClientOffset().y-c.top;n<l&&o<i||n>l&&o>i||(r(n,l),e.index=l)}}}});return m((0,Object(o.a)(p,2)[1])(u)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:u},l.a.createElement(C.f,{style:{cursor:"move"}}),l.a.createElement(T.a,{onChange:function(e){i(e.target.value)},value:a,size:"small",style:{width:"120px",margin:"0 4px"}}),l.a.createElement(s.a,{type:"link",onClick:c,style:{padding:"0"}},l.a.createElement(C.g,null))))}function pe(e){var t=e.data,a=Object(n.useContext)(_e);return l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:$()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(le.a.Item,{label:"\u5fc5\u586b"},l.a.createElement(ce.a,{checked:t.required,onChange:function(e){a({type:"UPDATE",data:$()(t,{required:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u53ea\u8bfb"},l.a.createElement(ce.a,{checked:t.disabled,onChange:function(e){a({type:"UPDATE",data:$()(t,{disabled:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u9009\u9879"},l.a.createElement(l.a.Fragment,null,t&&t.options&&t.options.map((function(e,n){return l.a.createElement(me,{key:"option-config-"+n,index:n,data:e.label,onChange:function(e){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,Object(te.a)({},n,{label:{$set:e||""}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.options)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(s.a,{type:"link",onClick:function(){var e=Object(x.a)({},t);e.options.push({label:"\u65b0\u9009\u9879",value:+new Date}),a({type:"UPDATE",data:e})}},"\u6dfb\u52a0\u5217")))))}function fe(){var e=Object(u.a)(["\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 125px;\n  display: inline-block;\n  cursor: move;\n  border: 1px solid #a3a3a3;\n  padding: 5px 10px;\n  margin: 2px;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-color: white;\n\n  > * {\n    margin-right: 4px;\n    vertical-align: middle;\n  }\n"]);return fe=function(){return e},e}var be=N.a.li(fe());function Ee(e){var t=e.widget,a=Object(I.a)({item:{type:t.type},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(o.a)(a,2),r=n[0].isDragging,c=n[1];return l.a.createElement(be,{key:t.name,style:{opacity:r?"0.5":1},ref:c},t.icon,l.a.createElement("span",null,t.name))}var ve=function(e){var t=e.name,a=e.list;return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.Fragment,{key:t},l.a.createElement("div",null,t),l.a.createElement("ul",{style:{width:"100%",listStyle:"none",padding:0}},a.map((function(e){return l.a.createElement(Ee,{key:e.name,widget:e})})))))};function ge(e){var t=e.data,a=Object(n.useContext)(_e);return l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:$()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(le.a.Item,{label:"\u5fc5\u586b"},l.a.createElement(ce.a,{checked:t.required,onChange:function(e){a({type:"UPDATE",data:$()(t,{required:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u53ea\u8bfb"},l.a.createElement(ce.a,{checked:t.disabled,onChange:function(e){a({type:"UPDATE",data:$()(t,{disabled:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u9009\u9879"},l.a.createElement(l.a.Fragment,null,t&&t.options&&t.options.map((function(e,n){return l.a.createElement(me,{key:"option-config-"+n,index:n,data:e.label,onChange:function(e){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,Object(te.a)({},n,{label:{$set:e||""}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.options)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(x.a)(Object(x.a)({},t),{},{options:$()(t.options,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(s.a,{type:"link",onClick:function(){var e=Object(x.a)({},t);e.options.push({label:"\u65b0\u9009\u9879",value:+new Date}),a({type:"UPDATE",data:e})}},"\u6dfb\u52a0\u5217")))))}function ye(e){var t=e.data,a=Object(n.useContext)(_e);return l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:$()(t,{label:{$set:e.target.value}})})}}))))}var he=T.a.TextArea,Oe=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.dispatch,c=Object(x.a)({},a);return c.label=c.label||"\u591a\u884c\u6587\u672c",l.a.createElement(l.a.Fragment,null,l.a.createElement(P,{ref:t,required:c.required,warning:c.warning,layout:n,warnable:c.warnable,label:c.labeled?l.a.createElement("label",{title:c.label},c.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(he,{rows:4,value:c.value,placeholder:c.placeholder,disabled:c.disabled,onChange:function(e){r&&r({type:"SET_VALUE",target:c,value:e.target.value})}})}))}));function je(e){var t=e.data,a=Object(n.useContext)(_e),r=Object(x.a)({},t);return r.label=r.label||"\u591a\u884c\u6587\u672c",l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{labelCol:{span:6}},l.a.createElement(le.a.Item,{label:"\u6807\u9898"},l.a.createElement(T.a,{value:r.label,onChange:function(e){a({type:"UPDATE",data:$()(r,{label:{$set:e.target.value}})})}})),l.a.createElement(le.a.Item,{label:"\u5fc5\u586b"},l.a.createElement(ce.a,{checked:r.required,onChange:function(e){a({type:"UPDATE",data:$()(r,{required:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u53ea\u8bfb"},l.a.createElement(ce.a,{checked:r.disabled,onChange:function(e){a({type:"UPDATE",data:$()(r,{disabled:{$set:e}})})}})),l.a.createElement(le.a.Item,{label:"\u9ed8\u8ba4\u503c"},l.a.createElement(T.a,{value:r.defaultValue,onChange:function(e){a({type:"UPDATE",data:$()(r,{defaultValue:{$set:e.target.value}})})}}))))}var De=a(396);function Ce(){var e=Object(u.a)(["\n  background-color: white;\n"]);return Ce=function(){return e},e}function we(){var e=Object(u.a)(["\n  background-color: white;\n"]);return we=function(){return e},e}function xe(){var e=Object(u.a)(["\n  background-color: white;\n"]);return xe=function(){return e},e}function ke(){var e=Object(u.a)(["\n  background-color: white;\n"]);return ke=function(){return e},e}var Ie=De.a.Header,Te=De.a.Sider,Ae=De.a.Content,Fe=Object(N.a)(De.a)(ke()),Pe=Object(N.a)(Ie)(xe()),Le=Object(N.a)(Te)(we()),Ue=Object(N.a)(Ae)(Ce());function qe(){var e=Object(u.a)(["\n  padding: 0 10px;\n  text-align: right;\n  border-bottom: 1px solid #a3a3a3;\n"]);return qe=function(){return e},e}function Ne(){var e=Object(u.a)(["\n  border-top: 1px solid #d3d3d3;\n  height: calc(100% - 1px);\n"]);return Ne=function(){return e},e}function Re(){var e=Object(u.a)(["\n  padding: 10px;\n  border-left: 1px solid #d3d3d3;\n"]);return Re=function(){return e},e}function $e(){var e=Object(u.a)(["\n  padding: 10px;\n  border-right: 1px solid #d3d3d3;\n"]);return $e=function(){return e},e}function Se(){var e=Object(u.a)(['\n  height: 100%;\n  &:after {\n    content: "Drag to drop";\n    font-size: 32px;\n    color: #d3d3d3;\n    left: calc(50% - 85px);\n    top: calc(50% - 25px);\n    position: absolute;\n    display: ',";\n  }\n\n  > .lanes {\n    height: 100%;\n  }\n"]);return Se=function(){return e},e}var Ve={type:"grid",id:"11270307",lanes:[{span:24,cellDataList:[]}],active:!1},ze=Object(N.a)(ee)(Se(),(function(e){return 0===e.cellData.lanes[0].cellDataList.length?"block":"none"})),_e=l.a.createContext({}),Je=Object(N.a)(Le).attrs({width:280})($e()),Be=Object(N.a)(Le).attrs({width:280})(Re()),Me=Object(N.a)(Fe)(Ne()),He=Object(N.a)(Pe)(qe()),We=function(e){var t=e.customCells,a=void 0===t?[{type:"textarea",icon:l.a.createElement(C.d,null),name:"\u591a\u884c\u6587\u672c",cell:Oe,config:je}]:t,r=Object(n.useReducer)(O,Ve),c=Object(o.a)(r,2),u=c[0],b=c[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),h=y[0],j=y[1],D=Object(n.useState)(null),x=Object(o.a)(D,2),k=x[0],I=x[1],T=Object(n.useRef)(),A=Object(n.useCallback)((function(e){46===e.keyCode&&b({type:"DELETE_ACTIVE"})}),[]);Object(n.useEffect)((function(){return document.addEventListener("keyup",A,!1),function(){document.removeEventListener("keyup",A,!1)}}),[A]);var P=function(e){var t=g(e,(function(e){return void 0!==e.active&&e.active}));return t?t[2]:null}(u);return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.Provider,{value:b},l.a.createElement(p.a,{backend:f.a},l.a.createElement(Fe,{style:{height:"100%"}},l.a.createElement(Pe,{style:{padding:"0 20px"}},l.a.createElement("h1",null,"Form Designer")),l.a.createElement(Ue,null,l.a.createElement(Me,null,l.a.createElement(Je,null,w.map((function(e){return l.a.createElement(ve,{key:e.name,name:e.name,list:e.widgets})})),l.a.createElement(ve,{key:"\u81ea\u5b9a\u4e49",name:"\u81ea\u5b9a\u4e49",list:Object(i.a)(null===a||void 0===a?void 0:a.map((function(e){return{type:e.type,name:e.name,icon:e.icon}})))})),l.a.createElement(Ue,null,l.a.createElement(Fe,{style:{height:"100%"}},l.a.createElement(He,null,l.a.createElement(d.a,null,l.a.createElement(s.a,{onClick:function(){b({type:"INIT",data:Ve})}},"Reset"),l.a.createElement(s.a,{onClick:function(){j(!0),I(E(u,(function(e){e.id+=+new Date})))}},"Preview"),l.a.createElement(s.a,null,"Save"))),l.a.createElement(Ue,{style:{height:"100%",padding:10}},l.a.createElement(ze,{cellData:u,index:0,customCells:a})))),l.a.createElement(Be,null,P?"grid"===P.type?l.a.createElement(re,{data:P}):"input"===P.type?l.a.createElement(ie,{data:P}):"datetime"===P.type?l.a.createElement(se,{data:P}):"select"===P.type?l.a.createElement(pe,{data:P}):"checkbox"===P.type?l.a.createElement(ge,{data:P}):"label"===P.type?l.a.createElement(ye,{data:P}):a&&a.some((function(e){return e.type===P.type}))&&l.a.createElement(a.filter((function(e){return e.type===P.type}))[0].config,{data:P,onChange:function(e){b({type:"UPDATE",data:e})}})||l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null)))))),l.a.createElement(m.a,{width:1e3,title:"Preview",visible:h,onCancel:function(){return j(!1)},footer:[l.a.createElement(s.a,{onClick:function(){var e=T.current.getData();alert(JSON.stringify(e))}},"Save"),l.a.createElement(s.a,{onClick:function(){return T.current.validate()}},"Validate")]},k&&l.a.createElement(F,{customCells:a,ref:T,data:E(k,(function(e){e.value=e.defaultValue||e.value})),key:k.id}))))};var Ge=function(){return l.a.createElement(We,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[201,1,2]]]);
//# sourceMappingURL=main.976f9663.chunk.js.map